@model GestionDeTurnos.Web.Models.Affiliate

@{
    ViewData["Title"] = "Carnet Digital";
}

<div class="row mb-4 align-items-center d-print-none">
    <div class="col">
        <h1 class="h3 mb-0 text-dark fw-bold text-uppercase">
            <i class="bi bi-person-badge me-2 text-primary"></i>Carnet Digital
        </h1>
        <p class="text-muted small mb-0">Credencial digital del afiliado para identificaci√≥n.</p>
    </div>
    <div class="col-auto">
        <a asp-action="Index" class="btn btn-light border shadow-sm">
            <i class="bi bi-arrow-left me-1"></i> Volver a la lista
        </a>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
        
        <!-- Credencial Card -->
        <div class="card border-0 shadow-lg overflow-hidden position-relative credencial-card" style="background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%); color: white; border-radius: 1rem; min-height: 480px;">
            
            <!-- Header Credencial -->
            <div class="card-header border-0 bg-transparent text-center pt-4 pb-0 position-relative z-1">
                <i class="bi bi-hospital display-4 text-white-50 mb-2"></i>
                <h5 class="text-uppercase letter-spacing-2 fw-bold mb-0">Salud Linux</h5>
                <p class="small text-white-50 opacity-75">Credencial de Afiliado</p>
            </div>

            <div class="card-body text-center position-relative z-1 pt-2">
                <!-- Foto -->
                <div class="mb-3 position-relative d-inline-block">
                    <div class="p-1 bg-white rounded-circle shadow-lg">
                        @if (!string.IsNullOrEmpty(Model.PhotoPath))
                        {
                            <img src="@Model.PhotoPath" class="rounded-circle" width="140" height="140" style="object-fit: cover;" alt="@Model.FirstName" />
                        }
                        else
                        {
                            <div class="rounded-circle bg-light d-flex align-items-center justify-content-center text-secondary" style="width: 140px; height: 140px;">
                                <span class="display-3 fw-bold text-secondary opacity-25">
                                    @Model.FirstName.Substring(0,1)@Model.LastName.Substring(0,1)
                                </span>
                            </div>
                        }
                    </div>
                    @if (Model.IsActive) {
                        <div class="position-absolute bottom-0 end-0 p-1 bg-white rounded-circle">
                            <i class="bi bi-check-circle-fill text-success fs-4"></i>
                        </div>
                    } else {
                         <div class="position-absolute bottom-0 end-0 p-1 bg-white rounded-circle">
                             <i class="bi bi-x-circle-fill text-danger fs-4"></i>
                         </div>
                    }
                </div>

                <!-- Datos -->
                <h3 class="fw-bold mb-1">@Model.FirstName @Model.LastName</h3>
                <p class="mb-4 text-white-50">DNI: <span class="text-white fw-bold">@Model.DocumentNumber</span></p>

                <div class="bg-white bg-opacity-10 rounded-3 p-3 text-start mx-3 backdrop-blur border border-white border-opacity-10">
                     <div class="row g-2">
                         <div class="col-6">
                             <small class="text-uppercase text-white-50 d-block fs-xs fw-bold">ID Afiliado</small>
                             <span class="font-monospace fw-bold fs-5">#@Model.Id.ToString("D6")</span>
                         </div>
                         <div class="col-6 text-end">
                             <small class="text-uppercase text-white-50 d-block fs-xs fw-bold">Vencimiento</small>
                             <span class="fw-bold">12/2030</span>
                         </div>
                         <div class="col-12 border-top border-white border-opacity-10 pt-2 mt-2">
                             <small class="text-uppercase text-white-50 d-block fs-xs fw-bold">Email</small>
                             <span class="text-truncate d-block">@Model.Email</span>
                         </div>
                     </div>
                </div>

                <!-- QR Placeholder (Visual) -->
                <div class="mt-4 opacity-50">
                    <i class="bi bi-qr-code-scan display-6"></i>
                    <p class="small mt-1 text-white-50 mb-0">Escanear para validar</p>
                </div>
            </div>

            <!-- Decorative shapes -->
            <div class="position-absolute top-0 start-0 translate-middle p-5 bg-white opacity-10 rounded-circle blur-xl" style="width: 300px; height: 300px;"></div>
            <div class="position-absolute bottom-0 end-0 translate-middle-x p-5 bg-black opacity-10 rounded-circle blur-xl" style="width: 200px; height: 200px;"></div>
        </div>

        <div class="text-center mt-4 d-print-none">
            <button onclick="window.print()" class="btn btn-outline-primary rounded-pill px-4 me-2 shadow-sm">
                <i class="bi bi-printer me-2"></i>Imprimir
            </button>
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary rounded-pill px-4 shadow-sm">
                <i class="bi bi-pencil me-2"></i>Editar Datos
            </a>
        </div>
    </div>
</div>


